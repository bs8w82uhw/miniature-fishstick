name: Code Quality

# This workflow runs linting and code quality checks.
# Extend this with language-specific linters as your project grows.

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]
  workflow_dispatch:

# Cancel in-progress workflows when a new commit is pushed
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  markdown-lint:
    name: Markdown Linting
    runs-on: ubuntu-latest
    permissions:
      contents: read
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Lint Markdown files
        uses: DavidAnson/markdownlint-cli2-action@v15
        with:
          globs: |
            **/*.md
            !**/node_modules/**
            !**/.github/**/*.md
        continue-on-error: true # Don't fail the workflow initially, just warn
  
  yaml-lint:
    name: YAML Linting
    runs-on: ubuntu-latest
    permissions:
      contents: read
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Lint YAML files
        uses: ibiqlik/action-yamllint@v3
        with:
          file_or_dir: .
          config_data: |
            extends: default
            rules:
              line-length:
                max: 120
                level: warning
              indentation:
                spaces: 2
              comments:
                min-spaces-from-content: 1
        continue-on-error: true # Don't fail the workflow initially, just warn
  
  # Placeholder for additional linting jobs as you add code
  # Add language-specific linters below as needed:
  
  # python-lint:
  #   name: Python Linting
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v4
  #     - uses: actions/setup-python@v5
  #       with:
  #         python-version: '3.x'
  #     - name: Install dependencies
  #       run: pip install flake8 black pylint
  #     - name: Run linters
  #       run: |
  #         flake8 .
  #         black --check .
  #         pylint **/*.py
  
  # javascript-lint:
  #   name: JavaScript/TypeScript Linting
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v4
  #     - uses: actions/setup-node@v4
  #       with:
  #         node-version: '20'
  #     - name: Install dependencies
  #       run: npm ci
  #     - name: Run ESLint
  #       run: npm run lint
  
  # go-lint:
  #   name: Go Linting
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v4
  #     - uses: actions/setup-go@v5
  #       with:
  #         go-version: 'stable'
  #     - name: Run golangci-lint
  #       uses: golangci/golangci-lint-action@v4
